{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{checkAdminExists}from'../services/api';// ✅ make sure this is imported\nimport'./SignupPage.css';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SignupPage=()=>{const[formData,setFormData]=useState({name:'',email:'',password:'',confirmPassword:'',role:'employee'});const[adminExists,setAdminExists]=useState(false);const navigate=useNavigate();useEffect(()=>{checkAdminExists().then(res=>{setAdminExists(res.data.exists);});},[]);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const[error,setError]=useState('');const validateForm=()=>{const nameRegex=/^[A-Za-z ]+$/;const emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(!nameRegex.test(formData.name)){setError(\"Name should contain only letters and spaces.\");return false;}if(!emailRegex.test(formData.email)){setError(\"Please enter a valid email address.\");return false;}if(formData.password.length<8){setError(\"Password must be at least 8 characters.\");return false;}if(formData.password!==formData.confirmPassword){setError(\"Passwords do not match.\");return false;}setError(\"\");// clear errors\nreturn true;};const handleSignup=async e=>{e.preventDefault();if(!validateForm())return;try{await axios.post('http://localhost:5000/signup',formData);toast.success('Signup successful! Please login.');navigate('/login');}catch(err){toast.error('Signup failed!');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"signup-container\",children:[/*#__PURE__*/_jsx(ToastContainer,{position:\"top-right\",autoClose:3000,hideProgressBar:false,newestOnTop:false,closeOnClick:true,rtl:false,pauseOnFocusLoss:true,draggable:true,pauseOnHover:true,theme:\"colored\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"signup-box\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/Otomeyt_AI_Logo.jpg\",alt:\"Otomeyt AI\",className:\"logo\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Sign Up\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red',marginBottom:'10px'},children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSignup,autoComplete:\"off\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Full Name\",required:true,value:formData.name,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",required:true,value:formData.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",required:true,value:formData.password,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"confirmPassword\",placeholder:\"Confirm Password\",required:true,value:formData.confirmPassword,onChange:handleChange}),/*#__PURE__*/_jsxs(\"select\",{name:\"role\",value:formData.role,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"employee\",children:\"Employee\"}),!adminExists&&/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Sign Up\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"extra-links\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/login\",children:\"Already have an account? Login\"})})]})]});};export default SignupPage;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","checkAdminExists","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","SignupPage","formData","setFormData","name","email","password","confirmPassword","role","adminExists","setAdminExists","navigate","then","res","data","exists","handleChange","e","target","value","error","setError","validateForm","nameRegex","emailRegex","test","length","handleSignup","preventDefault","post","success","err","className","children","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","theme","src","alt","style","color","marginBottom","onSubmit","autoComplete","type","placeholder","required","onChange","href"],"sources":["/home/oto-sandhya/Downloads/attendance-frontend/src/pages/SignupPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { checkAdminExists } from '../services/api'; // ✅ make sure this is imported\r\nimport './SignupPage.css';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\n\r\nconst SignupPage = () => {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n    role: 'employee',\r\n\r\n  });\r\n\r\n  const [adminExists, setAdminExists] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    checkAdminExists().then((res) => {\r\n      setAdminExists(res.data.exists);\r\n    });\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const [error, setError] = useState('');\r\n\r\n\r\n  const validateForm = () => {\r\n    const nameRegex = /^[A-Za-z ]+$/;\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  \r\n    if (!nameRegex.test(formData.name)) {\r\n      setError(\"Name should contain only letters and spaces.\");\r\n      return false;\r\n    }\r\n  \r\n    if (!emailRegex.test(formData.email)) {\r\n      setError(\"Please enter a valid email address.\");\r\n      return false;\r\n    }\r\n  \r\n    if (formData.password.length < 8) {\r\n      setError(\"Password must be at least 8 characters.\");\r\n      return false;\r\n    }\r\n  \r\n    if (formData.password !== formData.confirmPassword) {\r\n      setError(\"Passwords do not match.\");\r\n      return false;\r\n    }\r\n  \r\n    setError(\"\"); // clear errors\r\n    return true;\r\n  };\r\n  \r\n  \r\n  const handleSignup = async (e) => {\r\n    e.preventDefault();\r\n  \r\n    if (!validateForm()) return;\r\n  \r\n    try {\r\n      await axios.post('http://localhost:5000/signup', formData);\r\n      toast.success('Signup successful! Please login.');\r\n      navigate('/login');\r\n    } catch (err) {\r\n      toast.error('Signup failed!');\r\n    }\r\n  };\r\n  \r\n\r\n  return (\r\n    <div className=\"signup-container\">\r\n        <ToastContainer\r\n                          position=\"top-right\"\r\n                          autoClose={3000}\r\n                          hideProgressBar={false}\r\n                          newestOnTop={false}\r\n                          closeOnClick\r\n                          rtl={false}\r\n                          pauseOnFocusLoss\r\n                          draggable\r\n                          pauseOnHover\r\n                          theme=\"colored\"\r\n        />\r\n      <div className=\"signup-box\">\r\n        <img src=\"/Otomeyt_AI_Logo.jpg\" alt=\"Otomeyt AI\" className=\"logo\" />\r\n        <h2>Sign Up</h2>\r\n        {error && <p style={{ color: 'red', marginBottom: '10px' }}>{error}</p>}\r\n\r\n        <form onSubmit={handleSignup} autoComplete='off'>\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            placeholder=\"Full Name\"\r\n            required\r\n            value={formData.name}\r\n            onChange={handleChange}\r\n          />\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            placeholder=\"Email\"\r\n            required\r\n            value={formData.email}\r\n            onChange={handleChange}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder=\"Password\"\r\n            required\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n          />\r\n             <input\r\n              type=\"password\"\r\n              name=\"confirmPassword\"\r\n              placeholder=\"Confirm Password\"\r\n              required\r\n              value={formData.confirmPassword}\r\n              onChange={handleChange}\r\n            />\r\n          <select name=\"role\" value={formData.role} onChange={handleChange}>\r\n            <option value=\"employee\">Employee</option>\r\n            {!adminExists && <option value=\"admin\">Admin</option>}\r\n          </select>\r\n          <button type=\"submit\">Sign Up</button>\r\n        </form>\r\n        <div className=\"extra-links\">\r\n          <a href=\"/login\">Already have an account? Login</a>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignupPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}